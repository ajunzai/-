### http1.1
1. 在http1.1版本中我们可以针对浏览器对同一个域名支持的**最大TCP链接数**(6个并发数量)这个特性，使用**域名分片**技术来加快资源下载，
   但是这样会也会随之带来一些问题，服务器压力增大，浏览器解析域名花费时间增多，看似并没有很好的解决我们的问题。
2. http1.1中的TCP长连接存在**队头阻塞**的问题，针对同一个tcp链接中的每一http请求必须响应之后后面的http才能继续。
3. TCP本身的一些不好的特性，**慢启动，多条TCP链接竞争网速**。

### 思考css文件和js文件是什么时候开始加载的？
是在html文件相应完成之后，浏览器快速扫描资源，下载css和js。中间可能有空闲时间，有两种可能，html标签过多，css等待dom解析完成；dom解析完成css没下载完成。

在http1.1版本下我们能做的就是尽量缩短关键资源的加载，不管是html、css还是js。

在http1.1协议下，我们可以通过如下几种方案来做：
1. **压缩代码，去掉注释**
2. 对不依赖dom的js文件合理应用**async和defer**避免dom解析的阻塞
3. 对css应用媒体查询，对某些特定场景的css避免加载。
4. **合理调整文件的个数和大小**，这里不能一味的合并所有css或者js，如果某个css或者js体积过大，同样影响效率，
   只能不断的调整测试。本质就是减少资源加载花费的RTT，并且不要超过浏览器对同一域名最大的并发数。
5. **合理利用CDN**。
6. **应用域名分片技术**。


http1是明文协议，解析http1.1的明文是基于文本。http2.0的协议采用的是二进制格式。

http2为什么要采用**二进制**格式呢？**二进制则只认0和1的组合，解析速度更快。**
**就是在应⽤层(HTTP/2)和传输层(TCP or UDP)之间增加⼀个⼆进制分帧层**
总结一下：上文我们简单介绍了http2的多路复用功能，简单来说有如下几个特点：
1. http2针对同一个域名只建立一个TCP链接，所有http请求都通过这个TCP链接来完成。
2. http2给每个http的request都分配唯一的streamId，
3.http2将每个request切割为更小的帧，有header帧和body帧，并且给同一个request的帧分配相同的streamId，模拟实现了流的传输。


[参考地址](https://cloud.tencent.com/developer/article/1573513)
